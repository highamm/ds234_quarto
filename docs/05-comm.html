<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DATA / STAT 234 - 4&nbsp; Communication with Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./14-workflow.html" rel="next">
<link href="./03-dplyr.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Communication with <code>Quarto</code></span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DATA / STAT 234</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Syllabus and Course Information</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">The Core</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <code>R</code> and <code>R Studio</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-ggplot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Plotting with <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-dplyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Wrangling with <code>dplyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-comm.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Communication with <code>Quarto</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-workflow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Workflow and Other Skills</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Data Wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-tidyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Tidying with <code>tidyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Coding in Base <code>R</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-forcats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Factors with <code>forcats</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-ethics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Ethics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-import.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Import</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-merging.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Merging with <code>dplyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Special Topics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-lubridate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dates with <code>lubridate</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-stringr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Text Data with <code>tidytext</code> and <code>stringr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-knn.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Predictive Modeling with knn</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-connections.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Connections to STAT 113, STAT 213, and CS 140</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-sql.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Introduction to SQL with <code>dbplyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reproducibility" id="toc-reproducibility" class="nav-link active" data-scroll-target="#reproducibility"> <span class="header-section-number">4.1</span> Reproducibility</a>
  <ul class="collapse">
  <li><a href="#r-scripts-vs.-quarto" id="toc-r-scripts-vs.-quarto" class="nav-link" data-scroll-target="#r-scripts-vs.-quarto"> <span class="header-section-number">4.1.1</span> <code>R</code> Scripts vs.&nbsp;<code>Quarto</code></a></li>
  <li><a href="#spell-checking" id="toc-spell-checking" class="nav-link" data-scroll-target="#spell-checking"> <span class="header-section-number">4.1.2</span> Spell-Checking</a></li>
  <li><a href="#exercise-5-1" id="toc-exercise-5-1" class="nav-link" data-scroll-target="#exercise-5-1"> <span class="header-section-number">4.1.3</span> Exercises</a></li>
  </ul></li>
  <li><a href="#quarto-files" id="toc-quarto-files" class="nav-link" data-scroll-target="#quarto-files"> <span class="header-section-number">4.2</span> <code>Quarto</code> Files</a>
  <ul class="collapse">
  <li><a href="#code-chunk-options" id="toc-code-chunk-options" class="nav-link" data-scroll-target="#code-chunk-options"> <span class="header-section-number">4.2.1</span> Code Chunk Options</a></li>
  <li><a href="#global-options" id="toc-global-options" class="nav-link" data-scroll-target="#global-options"> <span class="header-section-number">4.2.2</span> Global Options</a></li>
  <li><a href="#figures-and-tables" id="toc-figures-and-tables" class="nav-link" data-scroll-target="#figures-and-tables"> <span class="header-section-number">4.2.3</span> Figures and Tables</a></li>
  <li><a href="#non-code-options" id="toc-non-code-options" class="nav-link" data-scroll-target="#non-code-options"> <span class="header-section-number">4.2.4</span> Non-Code Options</a></li>
  <li><a href="#yaml" id="toc-yaml" class="nav-link" data-scroll-target="#yaml"> <span class="header-section-number">4.2.5</span> YAML</a></li>
  <li><a href="#exercise-5-2" id="toc-exercise-5-2" class="nav-link" data-scroll-target="#exercise-5-2"> <span class="header-section-number">4.2.6</span> Exercises</a></li>
  </ul></li>
  <li><a href="#ggplot2-communication" id="toc-ggplot2-communication" class="nav-link" data-scroll-target="#ggplot2-communication"> <span class="header-section-number">4.3</span> <code>ggplot2</code> Communication</a>
  <ul class="collapse">
  <li><a href="#change-labels-and-titles" id="toc-change-labels-and-titles" class="nav-link" data-scroll-target="#change-labels-and-titles"> <span class="header-section-number">4.3.1</span> Change Labels and Titles</a></li>
  <li><a href="#changing-x-and-y-axis-limits" id="toc-changing-x-and-y-axis-limits" class="nav-link" data-scroll-target="#changing-x-and-y-axis-limits"> <span class="header-section-number">4.3.2</span> Changing x and y axis Limits</a></li>
  <li><a href="#changing-a-colour-scale" id="toc-changing-a-colour-scale" class="nav-link" data-scroll-target="#changing-a-colour-scale"> <span class="header-section-number">4.3.3</span> Changing A Colour Scale</a></li>
  <li><a href="#labeling-points-or-lines-of-interest" id="toc-labeling-points-or-lines-of-interest" class="nav-link" data-scroll-target="#labeling-points-or-lines-of-interest"> <span class="header-section-number">4.3.4</span> Labeling Points or Lines of Interest</a></li>
  <li><a href="#plot-themes" id="toc-plot-themes" class="nav-link" data-scroll-target="#plot-themes"> <span class="header-section-number">4.3.5</span> Plot Themes</a></li>
  <li><a href="#exercise-5-3" id="toc-exercise-5-3" class="nav-link" data-scroll-target="#exercise-5-3"> <span class="header-section-number">4.3.6</span> Exercises</a></li>
  </ul></li>
  <li><a href="#chapexercise-5" id="toc-chapexercise-5" class="nav-link" data-scroll-target="#chapexercise-5"> <span class="header-section-number">4.4</span> Chapter Exercises</a></li>
  <li><a href="#solutions-5" id="toc-solutions-5" class="nav-link" data-scroll-target="#solutions-5"> <span class="header-section-number">4.5</span> Exercise Solutions</a>
  <ul class="collapse">
  <li><a href="#reproducibility-s" id="toc-reproducibility-s" class="nav-link" data-scroll-target="#reproducibility-s"> <span class="header-section-number">4.5.1</span> Reproducibility S</a></li>
  <li><a href="#quarto-files-s" id="toc-quarto-files-s" class="nav-link" data-scroll-target="#quarto-files-s"> <span class="header-section-number">4.5.2</span> <code>Quarto</code> Files S</a></li>
  <li><a href="#ggplot2-communication-s" id="toc-ggplot2-communication-s" class="nav-link" data-scroll-target="#ggplot2-communication-s"> <span class="header-section-number">4.5.3</span> <code>ggplot2</code> Communication S</a></li>
  <li><a href="#chapexercise-5-S" id="toc-chapexercise-5-S" class="nav-link" data-scroll-target="#chapexercise-5-S"> <span class="header-section-number">4.5.4</span> Chapter Exercises S</a></li>
  </ul></li>
  <li><a href="#rcode-5" id="toc-rcode-5" class="nav-link" data-scroll-target="#rcode-5"> <span class="header-section-number">4.6</span> Non-Exercise <code>R</code> Code</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="comm" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Communication with <code>Quarto</code></span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><strong>Special Note</strong>: <code>Quarto</code> and <code>.qmd</code> files and <code>R Markdown</code> and <code>.qmd</code> files are extremely similar. In the previous version of this section, I used <code>R Markdown</code>. Quarto has an advantage in that <code>.qmd</code> files also work with Python and Julia, so they are generally better for an all-purpose data scientist. If you spot any references to <code>R Markdown</code> or a <code>.qmd</code> file, just mentally convert <code>R Markdown</code> to <code>Quarto</code> and <code>.rmd</code> to <code>qmd</code>.</p>
<p><strong>Goals</strong>:</p>
<ul>
<li><p>Explain what <em>reproducibility</em> means and explain why it’s important for analyses to be reproducible.</p></li>
<li><p>Explain why <code>Quarto</code> provides more tools for making analyses reproducible than base <code>R</code> with Microsoft Word and than Microsoft Excel.</p></li>
<li><p>Use the Code Options and the <code>Quarto</code> Text Options to modify an <code>Quarto</code> file so that it renders to a readable, professional .html file.</p></li>
<li><p>Use titles, labels, colour scales, annotations, and themes to make your plots easy to read, including for people with Colour Vision Deficiency.</p></li>
</ul>
<p>Overall: If you’re making some quick plots just for you, some of the things on communication won’t apply. But, if you’re planning on sharing results (usually you are, eventually), then communication tools become much more important.</p>
<section id="reproducibility" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="reproducibility"><span class="header-section-number">4.1</span> Reproducibility</h2>
<p>We’ve been using <code>Quarto</code> for a while now, but have not yet talked about any of its features or how to do anything except insert a new code chunk. By the end of this section, we want to be able to use some of the <code>Quarto</code> options to make a nice-looking document (so that you can implement some of these options in your first mini-project).</p>
<p><strong>Reproducibility</strong> is a concept that has recently gained popularity in the sciences for describing analyses that another researcher is able to repeat. That is, an analysis is <strong>reproducible</strong> if you provide enough information that the person sitting next to you can obtain identical results as long as they follow your procedures. An analysis is not reproducible if this isn’t the case. <code>Quarto</code> makes it easy for you to make your analysis reproducible for a couple of reasons:</p>
<ul>
<li><p>an <code>Quarto</code> file will not render unless all of your code runs, meaning that you won’t accidentally give someone code that doesn’t work.</p></li>
<li><p><code>Quarto</code> combines the “coding” steps with the “write-up” steps into one coherent document that contains the code, all figures and tables, and any explanations.</p></li>
</ul>
<section id="r-scripts-vs.-quarto" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="r-scripts-vs.-quarto"><span class="header-section-number">4.1.1</span> <code>R</code> Scripts vs.&nbsp;<code>Quarto</code></h3>
<p>We’ve been using <code>Quarto</code> for the entirety of this course. But, you may have noticed that when you go to File -&gt; New File to open a new <code>Quarto Document</code> file, there are a ton of other options. The first option is <code>R Script</code>. Go ahead and open a new <code>R Script</code> file now.</p>
<p>The file you open should be completely blank. An <code>R Script</code> is a file that reads <strong>only</strong> <code>R</code> code. It cannot have any text in it at all, unless that text is commented out with a <code>#</code>. For example, you could copy and paste all of the code that is inside a code chunk in a .qmd file to the .R file and run it line by line.</p>
<p>So, what are the advantages and disadvantages of using an <code>R Script</code> file compared to using an <code>Quarto</code> file? Let’s start with the advantages of <code>Quarto</code>. <code>Quarto</code> allows you to fully integrate text explanations of the code and results, the actual tables and figures themselves, and the code to make those tables and figures in one cohesive document. As we will see, if using <code>R Script</code>s to write-up an analysis in Word, there is a lot of copy-pasting involved of results. For this reason, using <code>Quarto</code> often results in more reproducible analyses.</p>
<p>The advantage of an <code>R</code> Script would be in a situation where you really aren’t presenting results to anyone and you also don’t need any text explanations. This often occurs in two situations. (1) There are a lot of data preparation steps. In this case, you would typically complete all of these data prep steps in an <code>R script</code> and then write the resulting clean data to a .csv that you’d import in an <code>Quarto</code> file. (2) What you’re doing is complicated statistically. If this is the case, then the code is much more of a focus than the text or creating figures so you’d use an <code>R</code> Script.</p>
<p>We will “demo” a reproducible analysis in class.</p>
</section>
<section id="spell-checking" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="spell-checking"><span class="header-section-number">4.1.2</span> Spell-Checking</h3>
<p>If using <code>Quarto</code> for communication, you probably want to utilize its spell-check feature. Go to Edit -&gt; Check Spelling, and you’ll be presented with a spell-checker that lets you change the spelling of any words you may have misspelled.</p>
</section>
<section id="exercise-5-1" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="exercise-5-1"><span class="header-section-number">4.1.3</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-5).</p>
<ol type="1">
<li>What’s the difference between <code>R</code> and <code>Quarto</code>?</li>
</ol>
<div class="cell">

</div>
<ol start="2" type="1">
<li>Why is an <code>Quarto</code> analysis more reproducible than the base <code>R</code> script analysis?</li>
</ol>
<div class="cell">

</div>
<ol start="3" type="1">
<li>Why is an <code>Quarto</code> analysis easier to make more reproducible than an analysis with Excel?</li>
</ol>
<div class="cell">

</div>
<ol start="4" type="1">
<li>Your friend Chaz is doing a data analysis project in Excel to compare the average GPA of student athletes with the average GPA of non-student athletes. He has two variables: whether or not a student is a student athlete and GPA. He decides that a two-sample t-test is an appropriate procedure for this data (recall from Intro Stat that this procedure is appropriate for comparing a quantitative response (GPA) across two groups). Here are the steps of his analysis.</li>
</ol>
<ol type="a">
<li><p>He writes the null and alternative hypotheses in words and in statistical notation.</p></li>
<li><p>He uses Excel to make a set of side-by-side boxplots. He changes the labels and the limits on the y-axis using Point-and-Click Excel operations.</p></li>
<li><p>From his boxplots, he see that there are 3 outliers in the non-athlete group. These three students have GPAs of 0 because they were suspended for repeatedly refusing to wear masks indoors. Chaz decides that these 3 students should be removed from the analysis because, if they had stayed enrolled, their GPAs would have been different than 0. He deletes these 3 rows in Excel.</p></li>
<li><p>Chaz uses the t.test function in Excel to run the test. He writes down the degrees of freedom, the T-stat, and the p-value.</p></li>
<li><p>Chaz copies his graph to Word and writes a conclusion in context of the problem.</p></li>
</ol>
<p>State 2 aspects of Chaz’s analysis that are <strong>not</strong> reproducible.</p>
<div class="cell">

</div>
</section>
</section>
<section id="quarto-files" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="quarto-files"><span class="header-section-number">4.2</span> <code>Quarto</code> Files</h2>
<p>Let’s talk a bit more about the components of the <code>Quarto</code> file used to make the reproducible analysis shown in class.</p>
<p>First, open a new <code>Quarto</code> file by clicking File -&gt; New File -&gt; <code>Quarto Document</code> and keep the new file so that it renders to HTML for now.</p>
<p>The first four to five lines at the top of the file make up the YAML (<strong>Yet Another Markup Language</strong>) header. We’ll come back to this at the end, as it’s the more frustrating part to learn.</p>
<p>Delete the code below the YAML header and then paste the following code chunks to your clean .qmd file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cars)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cars, <span class="fu">aes</span>(<span class="at">x =</span> speed, <span class="at">y =</span> dist)) <span class="sc">+</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>cars</code> data set is built into <code>R</code> so there’s no need to do anything to read it in (it already exists in <code>R</code> itself).</p>
<section id="code-chunk-options" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="code-chunk-options"><span class="header-section-number">4.2.1</span> Code Chunk Options</h3>
<p>First, render your new file (and give it a name, when prompted). You should see some code, a couple of results tables, and a scatterplot.</p>
<p>Chunk options allow you to have some control over what gets printed to the file that you render. For example, you may or may not want: the code to be printed, the figure to be printed, the tables to be printed, the <code>tidyverse</code> message to be printed, etc. There are a ton of chunk options to give us control over the code and output that is shown! We are going to just focus on a few that are more commonly used.</p>
<p>The options below are common <code>execute</code> options in <code>Quarto</code>.</p>
<ul>
<li><code>echo</code>. This is set to either <code>true</code> to print the code or <code>false</code> to not print the code. In a blank line after <code>```{r}</code>, insert the following, which tells <code>Quarto</code> not to print the code in that chunk: <code>#| echo: false</code>. Then, re-render your document to make sure that the code making the plot is actually hidden in the .html output.</li>
</ul>
<p>You can keep adding other options on new lines. Some other options include:</p>
<ul>
<li><p><code>warning</code>. This is set to either <code>true</code> to print warnings and messages or <code>false</code> to not print warnings and messages. For example, when we load in the <code>tidyverse</code>, a message automatically prints out. In that same code chunk, add a new line with <code>#| warning: false</code> to get rid of the message. Re-render to make sure the message is actually gone.</p></li>
<li><p><code>output</code>. By default, this is set to <code>true</code> and shows output of tables and figures. Change this to <code>false</code> to not print any output from running code. Practice adding a <code>#| output: false</code> to the code chunk in your <code>Quarto</code> file with <code>summary(cars)</code> and re-render to make sure the output from <code>summary(cars)</code> is gone.</p></li>
<li><p><code>eval</code>. <code>eval</code> is set to <code>true</code> if the code is to be evaluated and <code>false</code> if not.</p></li>
</ul>
<p>Besides <code>execute</code> options, there are also options pertaining to the size of figures and figure captions. Some common examples include</p>
<ul>
<li><p><code>fig-height</code> and <code>fig-width</code> control the height and width of figures. By default, these are both 7, but we can change the <code>fig-height</code> and <code>fig-width</code> to make figures take up less space in the rendered .html document (<code>fig-height: 5</code>, for example).</p></li>
<li><p><code>fig-cap</code> adds a figure caption to your figure. Try inserting <code>#| fig-cap: "Figure 1: caption text blah blah blah"</code> to your chunk options for the chunk with the plot.</p></li>
</ul>
</section>
<section id="global-options" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="global-options"><span class="header-section-number">4.2.2</span> Global Options</h3>
<p>What we have discussed so far is how to change code and output options for individual chunks of code. But, it can be a pain to add a certain option to every single chunk of code that we want the option to apply to. What we can do instead is change the <strong>global option</strong> for the code and/or output options so that they apply to all code chunks, unless specifically overwritten in that chunk.</p>
<p>We can change the <code>execute</code> options (<code>echo</code>, <code>warning</code>, <code>eval</code>, <code>output</code>, and more) globally by adding a line to the YAML header at the top of your <code>Quarto</code> file. Try adding</p>
<pre><code>execute: 
  echo: false</code></pre>
<p>as two new lines in between the <code>title</code> and <code>format</code> lines of the YAML header. This tells <code>Quarto</code> to not <code>echo</code> <strong>any</strong> code in any code chunk. However, note that you can change a local code chunk to have <code>#| echo: true</code> to override the global setting for that chunk.</p>
<p>Additional global <code>execute</code> options go on new lines:</p>
<pre><code>execute: 
  echo: false
  warning: false</code></pre>
<p>The non-<code>execute</code> options pertaining to figure size can be changed globally by specifying the option after the <code>html</code> part of the YAML header. The following changes all figure heights to be <code>2</code>, unless a chunk overrides the global setting:</p>
<pre><code>---
title: "Quarto Test"
execute: 
  echo: false
format: 
  html:
    fig-height: 2
---</code></pre>
<p><strong>Important Note</strong>: We need to pay particular attention to the spacing of things in the YAML header. Notice, for example, that <code>echo: false</code> is indented by exactly two spaces. Try adding a space or deleting a space, and you’ll get an error!</p>
</section>
<section id="figures-and-tables" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="figures-and-tables"><span class="header-section-number">4.2.3</span> Figures and Tables</h3>
<p>We’ve already seen that Figures will pop up automatically (unless we set <code>output: false</code>), which is quite convenient. Making tables that look nice requires one extra step.</p>
<p>Delete the <code>output: false</code> option that you added earlier to the chunk with <code>summary(cars)</code>. When you render your .qmd file now, results tables from <code>head(cars)</code> and <code>summary(cars)</code> look kind of ugly. We will focus on using the <code>kable()</code> function from the <code>knitr</code> package to make these tables much more aesthetically pleasing. Another option is to use the <code>pander()</code> function in the <code>pander</code> package. Both <code>pander()</code> and <code>kable()</code> are very simple functions to generate tables but will be more than sufficient for our purposes. To generate more complicated tables, see the <code>xtable</code> package.</p>
<p>To use these functions, simply add a <code>|&gt;</code> pipe with the name of the table function you want to use. <code>head(cars) |&gt; kable()</code> will make a nice-looking table with <code>kable</code> and <code>head(cars) |&gt; pander()</code> will use <code>pander()</code>. Before using <code>kable()</code> from the <code>knitr</code> package, you’ll need to install the <code>knitr</code> package with <code>install.packages("knitr")</code> and load its library by adding the line <code>library(knitr)</code> above <code>head(cars) |&gt; kable()</code>. Before using <code>pander()</code>, you’ll need to install the <code>pander</code> package with <code>install.packages("pander")</code> and then load its library by adding the line <code>library(pander)</code> above <code>head(cars) |&gt; pander()</code>. Try these out in your <code>Quarto</code> file.</p>
<p>Which table do you like better in this case?</p>
<p>There are plenty of options for making tables look presentable, which we will discuss in the Exercises. Keep in mind that you probably wouldn’t use these when making tables for yourself. They’re much more useful when you’re writing a report that you want to share with others.</p>
</section>
<section id="non-code-options" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="non-code-options"><span class="header-section-number">4.2.4</span> Non-Code Options</h3>
<p><code>Quarto</code> combines <code>R</code> (in the code chunks, which we’ve already discussed) with the <code>Markdown</code> syntax, which comprises the stuff outside the code chunks, like what you’re reading right now!</p>
<p>There are so many <code>Markdown</code> options, but most of the time, if you want to do something specific, you can just Google it. The purpose of what follows is just to get us familiar with the very basics and things you will probably use most often.</p>
<p><strong>Bullet Points and Sub-bullet Points</strong>: Denoted with a <code>*</code> and <code>-</code>, respectively. The sub bullets should be indented by 4 spaces. Note that bullet points are not code and should <strong>not</strong> appear in a code chunk.</p>
<pre><code>* Bullet 1
* Bullet 2
    - Sub bullet 1
    - Sub bullet 2
    - Sub bullet 3</code></pre>
<!-- See Ordered and Unordered Lists in <a href="https://rmarkdown.rstudio.com/authoring_basics.html" target="_blank">https://rmarkdown.rstudio.com/authoring_basics.html</a>  for an example. -->
<p><strong>Note</strong>: Everything in <code>Markdown</code> is very particular with spacing. Things often have to be very precise. I personally just love it, but it can be frustrating sometimes. For example, indenting a sub-bullet by <strong>3</strong> spaces instead of <strong>4</strong> spaces will not make a sub-bullet.</p>
<pre><code>* Bullet 1
   - Sub bullet 1</code></pre>
<p>Numbered Lists are the same as bulleted ones, except <code>*</code> is replaced with numbers <code>1.</code>, <code>2.</code>, etc.</p>
<p><strong>Bold, Italics, Code</strong>. Surround text with <code>__bold text__</code> to make text bold, <code>_italic text_</code> to make text Italics, and backticks to make text look like Code.</p>
<p><strong>Links</strong>: The simplest way to create a link to something on the web is to surround it with <code>&lt; &gt;</code> as in <code>&lt;https://www.youtube.com/watch?v=gJf_DDAfDXs&gt;</code></p>
<p>If you want to name you link something other than the web address, use <code>[name of link](https://www.youtube.com/watch?v=gJf_DDAfDXs)</code>, which should show up in your rendered document as “name of link” and, when clicked on, take you to the youtube video.</p>
<p><strong>Headers</strong>: Headers are created with <code>##</code> with fewer hashtags resulting in a bigger Header. Typing in <code>#Big Header</code> at the beginning of a line would make a big header, <code>### Medium Header</code> would make a medium header, and <code>##### Small Header</code> would make a small header. Headers are important because they get mapped to a table of contents.</p>
<p>There’s a lot of other stuff to explore: &lt;a href=“https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf” target=“blank&gt; https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf .</p>
<p>But, if you want to do something other than the basics, Google will definitely help.</p>
</section>
<section id="yaml" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="yaml"><span class="header-section-number">4.2.5</span> YAML</h3>
<p>We have briefly discussed what’s given at the top of every .qmd file: the YAML header. The YAML header is the most frustrating part to change because it’s the most particular with spacing.</p>
<p>In addition to controlling global chunk options, we can also use the YAML header to specify a theme from <a href="https://quarto.org/docs/output-formats/html-themes.html" target="_blank"> Bootswatch.</a></p>
<p>There are 25 themes in the <code>Bootswatch</code> project. The YAML header below uses the <code>darkly</code> theme. Try pasting in this YAML header and rendering the document to see the outputted theme.</p>
<pre><code>---
title: "Quarto Test"
execute: 
  echo: false
  warning: false
format: 
  html:
    fig-height: 2
    theme: darkly
    self-contained: true
---</code></pre>
<p>We can also add a table of contents, which will create a table of contents based on headers you have created with <code>##</code>.</p>
<pre><code>---
title: "Quarto Test"
execute: 
  echo: false
  warning: false
format: 
  html:
    fig-height: 2
    theme: darkly
    toc: true
    self-contained: true
---</code></pre>
<p>There are <strong>so</strong> many other options available for theming, and, if you know any <code>css</code>, you can provide your own <code>.css</code> file to customize the theme.</p>
</section>
<section id="exercise-5-2" class="level3" data-number="4.2.6">
<h3 data-number="4.2.6" class="anchored" data-anchor-id="exercise-5-2"><span class="header-section-number">4.2.6</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-4).</p>
<p>For the rest of this section, we will use the built-in <code>R</code> data set <code>mtcars</code>, which has observations on makes and models of cars. The variables we will be using are:</p>
<ul>
<li><code>cyl</code>, the number of cylinders a car has</li>
<li><code>mpg</code>, the mileage of the car, in miles per gallon</li>
</ul>
<p>Because the data set is loaded every time <code>R</code> is started up, there is no need to have a line that reads in the data set. We can examine the first few observations with</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
</div>
<ol type="1">
<li><p>* Create a table showing the mean <code>mpg</code> for each <code>cyl</code> group (<code>cyl</code> stands for cylinder and can be 4-cylinder, 6-cylinder, or 8-cylinder) with both <code>kable()</code> and <code>pander()</code>. Hint: remember to call the <code>knitr</code> library and the <code>pander</code> library.</p></li>
<li><p>* Type <code>?kable</code> into your console window and scroll through the Help file. Change the rounding of the mean so that it only displays one number after the decimal. Then, add a caption to the table that says “My First Table Caption!!”</p></li>
<li><p>* Google “How to Change Column Names in kable” and replace the column names with “Cylinder Numb.” and “Mean Mileage”.</p></li>
<li><p>Find a table that you plan to use in your first mini-project. Use the column names, caption, and digits options to make this table look nicer with the <code>kable()</code> function.</p></li>
</ol>
<div class="cell">

</div>
<ol start="5" type="1">
<li>Create a new <code>R</code> chunk and copy and paste the following into your new <code>R</code> chunk. Don’t worry about what <code>factor()</code> is doing: we will cover that next week!</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mtcars, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Modify the <code>R</code> chunk so that: (a) the figure height is 3, (b) the code from the <code>R</code> chunk shows in the .html file, (c) the table from running <code>head(cars)</code> are hidden in the .html file. Make (b) and (c) a <strong>local</strong> chunk option, but set (a) as a <strong>global</strong> option that applies to all of your <code>R</code> chunks.</p>
<div class="cell">

</div>
<ol start="6" type="1">
<li><p>Change your global options in your first project to (a) hide messages from loading in the <code>tidyverse</code> and (b) show all code.</p></li>
<li><p>Use bullet points in the Introduction in your first mini-project that explains what a few of the important variables are. Then, add a header to your project that marks the Introduction.</p></li>
<li><p>Change the YAML header in your project so that you are the Author (with something like <code>author: "Your Name"</code> and so that the file uses a theme from <code>Bootswatch</code> other than the default theme.</p></li>
</ol>
</section>
</section>
<section id="ggplot2-communication" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="ggplot2-communication"><span class="header-section-number">4.3</span> <code>ggplot2</code> Communication</h2>
<p>When we first introduced plotting, we used histograms, boxplots, frequency plots, bar plots, scatterplots, line plots, and more to help us explore our data set. You will probably make many different plots in a single analysis, and, when exploring, it’s fine to keep these plots unlabeled and untitled with the default colour scheme and theme. They’re just for you, and you typically understand the data and what each variable means.</p>
<p>However, when you’ve finished exploring and you’d like to communicate your results, both graphically and numerically, you’ll likely want to tweak your plots to look more aesthetically pleasing. You certainly wouldn’t be presenting every exploratory plot you made so this tweaking needs to be done on only a few plots. You might consider:</p>
<ul>
<li><p>changing the x-axis and y-axis labels, changing the legend title, adding a title, adding a subtitle, and adding a caption with <code>+ labs()</code></p></li>
<li><p>changing the limits of the x-axis and y-axis with <code>+ xlim()</code> and <code>+ ylim()</code></p></li>
<li><p>changing the colour scheme to be more visually appealing and easy to see for people with colour-vision-deficiency (CVD)</p></li>
<li><p>labeling certain points or lines with <code>+ geom_label()</code> or <code>+ geom_text()</code></p></li>
<li><p>changing from the default theme with <code>+ theme_&lt;name_of_theme&gt;()</code></p></li>
</ul>
<p>The bullet about labeling only certain points is the data set is one reason why we are doing this second <code>ggplot2</code> section now, as opposed to immediately after the first <code>ggplot2</code> section. As we will see, we’ll make use of combining what we’ve learned in <code>dplyr</code> to help us label interesting observations in our plots.</p>
<p><strong>The Data</strong></p>
<p>The Happy Planet Index (HPI) is a measure of how efficiently a country uses its ecological resources to give its citizens long “happy” lives. You can read more about this data here: <a href="https://static1.squarespace.com/static/5735c421e321402778ee0ce9/t/578dec7837c58157b929b3d6/1468918904805/Methods+paper_2016.pdf" target="_blank"> here</a>.</p>
<p>But, the basic idea is that the HPI is a metric that computes how happy and healthy a country’s citizens are, but adjusts that by that country’s ecological footprint (how much “damage” the country does to planet Earth). The data set was obtained from <a href="https://github.com/aepoetry/happy_planet_index_2016" target="_blank"> https://github.com/aepoetry/happy_planet_index_2016</a>. Variables in the data set are:</p>
<ul>
<li><code>HPIRank</code>, the rank of the country’s Happy Planet Index (lower is better)</li>
<li><code>Country</code>, the name of the country</li>
<li><code>LifeExpectancy</code>, the average life expectancy of a citizen (in years)</li>
<li><code>Wellbeing</code>, the average well being score (on a scale from 1 - 10). See the ladder question in the documentation for how this was calculated.</li>
<li><code>HappyLifeYears</code>, a combination of <code>LifeExpectancy</code> and <code>Wellbeing</code></li>
<li><code>Footprint</code>, the ecological footprint per person (higher footprint means the average person in the country is less ecologically friendly)</li>
</ul>
<p>Read in the data set with</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>hpi_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/hpi-tidy.csv"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hpi_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  HPIRank Country     LifeExpe…¹ Wellb…² Happy…³ Footp…⁴ Happy…⁵ Popul…⁶ GDPca…⁷
    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1     109 Afghanistan       48.7    4.76    29.0   0.540    36.8  3.44e7   1207.
2      18 Albania           76.9    5.27    48.8   1.81     54.1  3.20e6   8592.
3      26 Algeria           73.1    5.24    46.2   1.65     52.2  3.55e7   8433.
4     127 Angola            51.1    4.21    28.2   0.891    33.2  1.91e7   6186.
5      17 Argentina         75.9    6.44    55.0   2.71     54.1  4.04e7  16012.
6      53 Armenia           74.2    4.37    41.9   1.73     46.0  3.09e6   5463.
# … with 2 more variables: GovernanceRank &lt;chr&gt;, Region &lt;chr&gt;, and abbreviated
#   variable names ¹​LifeExpectancy, ²​Wellbeing, ³​HappyLifeYears, ⁴​Footprint,
#   ⁵​HappyPlanetIndex, ⁶​Population, ⁷​GDPcapita</code></pre>
</div>
</div>
<p>Let’s look at the relationship between <code>HappyLifeYears</code> and <code>Footprint</code> for countries of different <code>Region</code>s of the world.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Which region seems to have the most variability in their Ecological Footprint?</p>
<section id="change-labels-and-titles" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="change-labels-and-titles"><span class="header-section-number">4.3.1</span> Change Labels and Titles</h3>
<p>We can add <code>+ labs()</code> to change various labels and titles throughout the plot:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Countries with a Higher Ecological Footprint Tend to Have Citizens with Longer, Happier Lives"</span>, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add title</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"HappyLifeYears is a Combination of Life Expectancy and Citizen Well-Being"</span>, </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add subtitle (smaller text size than the title)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Data Source: http://happyplanetindex.org/countries"</span>, </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add caption to the bottom of the figure</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Ecological Footprint"</span>, <span class="do">## change x axis label</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Happy Life Years"</span>, <span class="do">## change y axis label</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour =</span> <span class="st">"World Region"</span>) <span class="do">## change label of colour legend</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Any <code>aes()</code> that you use in your plot gets its own label and can be changed by <code>name_of_aethetic = "Your Label"</code>. In the example above, we changed all three <code>aes()</code> labels: <code>x</code>, <code>y</code>, and <code>colour</code>.</p>
<p>What is the only text on the plot that we aren’t able to change with <code>labs()</code>?</p>
</section>
<section id="changing-x-and-y-axis-limits" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="changing-x-and-y-axis-limits"><span class="header-section-number">4.3.2</span> Changing x and y axis Limits</h3>
<p>We can also change the x-axis limits and the y-axis limits to, for example, start at 0 for the y-axis:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">70</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In this case, it makes the points on the plot a bit harder to see. You can also change where and how often tick marks appear on the x and y-axes. For special things like this, I think it’s best to just resort to Google (“ggplot how to change x-axis breaks tick marks” should help).</p>
</section>
<section id="changing-a-colour-scale" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="changing-a-colour-scale"><span class="header-section-number">4.3.3</span> Changing A Colour Scale</h3>
<p>We want to use our graphics to communicate with others as clearly as possible. We also want to be as inclusive as possible in our communications. This means that, if we choose to use colour, our graphics should be made so that a colour-vision-deficient (CVD) person can read our graphs. About 4.5% of people are colour vision deficient, so it’s actually quite likely that a CVD person will view the graphics that you make (depending on how many people you share it with) <a href="http://www.colourblindawareness.org/colour-blindness/#:~:text=What%20is%20colour%20blindness%3F,most%20of%20whom%20are%20male" target="_blank">More Information on CVD</a>.</p>
<p>The colour scales from <code>R Colour Brewer</code> are readable for common types of CVD. A list of scales can be found <a href="https://www.datanovia.com/en/wp-content/uploads/dn-tutorials/ggplot2/figures/0101-rcolorbrewer-palette-rcolorbrewer-palettes-1.png" target="_blank">here</a>.</p>
<p>You would typically use the top scales if the variable you are colouring by is ordered sequentially (called <code>seq</code> for sequential, like grades in a course: A, B, C, D, F), the bottom scales if the variable is diverging (called <code>div</code> for diverging, like Republican / Democrat lean so that the middle is colourless), and the middle set of scales if the variable is not unordered and is categorical (called <code>qual</code> for qualitative like the names of different treatment drugs for a medical experiment).</p>
<p>In which of those 3 situations are we in for the World Region graph?</p>
<p>If we want to use one of these colour scales, we just need to add <code>scale_colour_brewer()</code> with the name of the scale we want to use.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Accent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Try changing the palette to something else besides <code>"Accent"</code>. Do you like the new palette better or worse?</p>
<p>One more option to easily change the colour scale is to use the <code>viridis</code> package. The base <code>viridis</code> functions automatically load with <code>ggplot2</code> so there’s no need to call the package with <code>library(viridis)</code>. The <code>viridis</code> colour scales were made to be both aesthetically pleasing and CVD-friendly.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A drawback of the <code>viridis</code> package is that the yellow can be really hard to see (at least for me).</p>
<p>Read the examples section of the Help file for <code>?scale_colour_viridis_d</code>. What’s the difference between <code>scale_colour_viridis_d()</code>, <code>?scale_colour_viridis_c()</code>, and <code>scale_colour_viridis_b()</code>?</p>
<p>Which do you like better: the Colour Brewer scale or the Viridis scale?</p>
</section>
<section id="labeling-points-or-lines-of-interest" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="labeling-points-or-lines-of-interest"><span class="header-section-number">4.3.4</span> Labeling Points or Lines of Interest</h3>
<p>One goal we might have with communication is highlighting particular points in a data set that show something interesting. For example, we might want to label the points on the graph corresponding to the countries with the highest HPI in each region: these countries are doing the best in terms of using resources efficiently to maximize citizen happiness. Or, we might want to highlight some “bad” example of countries that are the least efficient in each region. Or, we might want to label the country that we are from on the graph.</p>
<p>All of this can be done with <code>geom_label()</code>. Let’s start by labeling all of the points. <code>geom_label()</code> needs one aesthetic called <code>label</code> which is the name of the column in the data set with the labels you want to use.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> Country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Yikes! It’s quite uncommon to want to label <strong>all</strong> of the points. Let’s see if we can instead label each country with the best HPI in that country’s region. To do so, we first need to use our <code>dplyr</code> skills to create a new data set that has these 7 “best” countries. When we used <code>group_by()</code>, we typically used <code>summarise()</code> afterward. But, <code>group_by()</code> works with <code>filter()</code> as well!</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> hpi_df <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Region) <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HPIRank <span class="sc">==</span> <span class="fu">min</span>(HPIRank))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What is the code in the previous chunk doing?</p>
<p>Now that we have this new data set, we can use it within <code>geom_label()</code>. Recall that the <code>data =</code> argument in <code>ggplot()</code> carries on through <strong>all</strong> <code>geom</code>s <strong>unless</strong> we specify otherwise. Now is our chance to “specify otherwise” by including another <code>data =</code> argument within <code>geom_label()</code>:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Why do you think the colour legend changed to showing the letter “a” for each region?</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Why does the code chunk above change all of the “a”’s back to points?</p>
<p>A common issue, even with few labels, is that some of the labels could overlap. The <code>ggrepel</code> package solves this problem by including a <code>geom_label_repel()</code> <code>geom</code> that automatically repels any overlapping labels:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And a final issue with the plot is that it’s not always very clear which point on the plot is being labeled. A trick used in the <em>R for Data Science</em> book is to surround the points that are being labeled with an open circle using an extra <code>geom_point()</code> function:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears, <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In the code above, <code>shape = 1</code> says that the new point should be an open circle and <code>size = 3</code> makes the point bigger, ensuring that it goes around the original point. <code>show.legend = FALSE</code> ensures that the larger open circles don’t become part of the legend.</p>
<p>You can use this same strategy to label specific countries. I’m interested in where the United States of America falls on this graph because I’m from the U.S. I’m also interested in where Denmark falls because that’s the country I’m most interested in visiting. Feel free to replace those countries with any that you’re interested in!</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>plot_df_us <span class="ot">&lt;-</span> hpi_df <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States of America"</span> <span class="sc">|</span> Country <span class="sc">==</span> <span class="st">"Denmark"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country),</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plot-themes" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="plot-themes"><span class="header-section-number">4.3.5</span> Plot Themes</h3>
<p>Plot themes are an easy way to change many aspects of your plot with an overall theme that someone developed. The default theme for <code>ggplot2</code> graphs is <code>theme_grey()</code>, which is the graph with the grey background that we’ve been using in the entirety of this class. The 7 other themes are given in <a href="https://r4ds.had.co.nz/graphics-for-communication.html#themes" target="_blank">R for Data Science</a> in Figure 28.3.</p>
<p>However, there are many more choices in the <code>ggthemes</code> package. Load the package with <code>library(ggthemes)</code> and check out <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" target="_blank">https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/</a> for a few of the themes in the package. My personal favorites, all given below, are <code>theme_solarized()</code>, <code>theme_fivethirtyeight()</code>, and <code>theme_economist()</code>, but choosing a theme is mostly a matter of personal taste.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_solarized</span>()</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_fivethirtyeight</span>()</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There’s still <strong>much</strong> more you can do with <code>ggplot2</code>. In fact, there are entire <a href="http://moderngraphics11.pbworks.com/f/ggplot2-Book09hWickham.pdf" target="_blank">books on it</a>. But, for most other specializations, you can usually use Google to help you!</p>
</section>
<section id="exercise-5-3" class="level3" data-number="4.3.6">
<h3 data-number="4.3.6" class="anchored" data-anchor-id="exercise-5-3"><span class="header-section-number">4.3.6</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-5).</p>
<p>The <code>theme()</code> function is a way to really specialise your plot. We will explore some of these in the exercise below.</p>
<ol type="1">
<li>Using only options in <code>theme()</code> or options to change colours, shapes, sizes, etc., create the ugliest possible <code>ggplot2</code> graph that you can make. You may not change the underlying data for this graph, but your goal is to investigate some of the options given in <code>theme()</code>. A list of theme options is given <a href="https://ggplot2.tidyverse.org/reference/theme.html" target="_blank">in this link</a>.</li>
</ol>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We will practice more with communicating with plots in the chapter exercises.</p>
</section>
</section>
<section id="chapexercise-5" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="chapexercise-5"><span class="header-section-number">4.4</span> Chapter Exercises</h2>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-5).</p>
<p>Some data sets exist within specific <code>R</code> packages. For example, Jenny Bryan, who is quite famous in the stats/data science community, has put together the <code>gapminder</code> package so that users in <code>R</code> have access to a specific data set on countries throughout the world. <a href="https://github.com/jennybc/gapminder" target="_blank">https://github.com/jennybc/gapminder</a>.</p>
<p>To load a data set within a specific <code>R</code> package, you first need to install the package with <code>install.packages("gapminder")</code> and load the package itself:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, name the data set something. In this case, the name of the data set is <code>gapminder</code>, but it’s not always the same name as the package itself. We will name the data set <code>country_df</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>country_df <span class="ot">&lt;-</span> gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Explore the data set with <code>head(country_df)</code> and <code>?gapminder</code> before proceeding to the following exercises.</p>
<ol type="1">
<li><p>* Make a line graph that shows the relationship between <code>lifeExp</code> and <code>year</code> for each of the countries in the data set, faceting the graph by continent and also colouring by continent (though this is redundant). Add an x-axis label, a y-axis label, a legend label, and a title to the graph.</p></li>
<li><p>* Change the colour palette to be CVD-friendly using either <code>scale_colour_brewer()</code> or <code>scale_colour_viridis_d()</code>.</p></li>
<li><p>* We can see a couple of interesting trends in life expectancy. There is one country in Africa and one country in Asia that sees a sharp decline in life expectancy at one point. In Europe, there is one country that has a substantially lower life expectancy than the rest in the 1950s but catches up to other European countries by the 2000s. Use <code>filter()</code> to create a data set that only has these 3 countries. Then, use <code>geom_label()</code> to label all three countries on your plot.</p></li>
</ol>
<div class="cell">

</div>
<ol start="4" type="1">
<li>Google the history of the countries in Africa and Asia that you just labeled. Add a very short description of why each country experienced a dip in life expectancy as a caption in your graph.</li>
</ol>
<div class="cell">

</div>
<ol start="5" type="1">
<li>Read the help file for <code>?annotate</code>. How is this different than <code>geom_label()</code>. Which one allows finer tuning? Which one takes more code to use? One of the functions (<code>annotate()</code> or <code>geom_label()</code>) becomes more of a pain to use when there are many labels. Which one becomes harder to use and why?</li>
</ol>
<div class="cell">

</div>
<ol start="6" type="1">
<li>Suppose that we want the legend to appear on the bottom of the graph. Without using an entirely different theme, use Google to figure out how to move the legend from the right-hand side to the bottom.</li>
</ol>
<div class="cell">

</div>
<ol start="7" type="1">
<li>If there are a lot of overlapping points or overlapping lines, we can use <code>alpha</code> to control the transparency of the lines. Google “change transparency of lines in ggplot” and change the <code>alpha</code> so that the lines are more transparent.</li>
</ol>
<div class="cell">

</div>
<ol start="8" type="1">
<li>Change the theme of your plot to a theme in the <code>ggthemes</code> package. Then, change the <strong>order</strong> of your two commands to change the legend position and to change the overall theme. What happens?</li>
</ol>
<div class="cell">

</div>
<ol start="9" type="1">
<li>Modify your .qmd file so that:</li>
</ol>
<ul>
<li><p>only the figure that you made in Exercise 8 prints on your .html file. (Hint: use global options to help with this).</p></li>
<li><p>none of the code gets printed.</p></li>
<li><p>the warnings/messages that <code>R</code> prints by default are hidden in all code chunks.</p></li>
<li><p>the figure height is 5 instead of the default 7.</p></li>
</ul>
<ol start="10" type="1">
<li>Read the following up to “How can software tools make our research more reproducible?” <a href="https://ropensci.github.io/reproducibility-guide/sections/introduction/" target="_blank">https://ropensci.github.io/reproducibility-guide/sections/introduction/</a>. How does what is discussed in the article related to <code>Quarto</code>?</li>
</ol>
</section>
<section id="solutions-5" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="solutions-5"><span class="header-section-number">4.5</span> Exercise Solutions</h2>
<section id="reproducibility-s" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="reproducibility-s"><span class="header-section-number">4.5.1</span> Reproducibility S</h3>
</section>
<section id="quarto-files-s" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="quarto-files-s"><span class="header-section-number">4.5.2</span> <code>Quarto</code> Files S</h3>
<ol type="1">
<li>* Create a table showing the mean <code>mpg</code> for each <code>cyl</code> group (<code>cyl</code> stands for cylinder and can be 4-cylinder, 6-cylinder, or 8-cylinder) with both <code>kable()</code> and <code>pander()</code>. Hint: remember to call the <code>knitr</code> library and the <code>pander</code> library.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pander)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>mpg_df <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> <span class="fu">group_by</span>(cyl) <span class="sc">|&gt;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">meanmpg =</span> <span class="fu">mean</span>(mpg))</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>mpg_df <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">meanmpg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">26.66364</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">19.74286</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">15.10000</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>mpg_df <span class="sc">|&gt;</span> <span class="fu">pander</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 8%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">cyl</th>
<th style="text-align: center;">meanmpg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">26.66</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">19.74</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8</td>
<td style="text-align: center;">15.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="2" type="1">
<li>* Type <code>?kable</code> into your console window and scroll through the Help file. Change the rounding of the mean so that it only displays one number after the decimal. Then, add a caption to the table that says “My First Table Caption!!”</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>mpg_df <span class="sc">|&gt;</span> <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>, <span class="at">caption =</span> <span class="st">"My First Table Caption!!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>My First Table Caption!!</caption>
<thead>
<tr class="header">
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">meanmpg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">26.7</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">19.7</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">15.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol start="3" type="1">
<li>* Google “How to Change Column Names in kable” and replace the column names with “Cylinder Numb.” and “Mean Mileage”.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mpg_df <span class="sc">|&gt;</span> <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>, <span class="at">caption =</span> <span class="st">"My First Table Caption!!"</span>,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Cylinder Numb."</span>, <span class="st">"Mean Mileage"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>My First Table Caption!!</caption>
<thead>
<tr class="header">
<th style="text-align: right;">Cylinder Numb.</th>
<th style="text-align: right;">Mean Mileage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">26.7</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">19.7</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">15.1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="ggplot2-communication-s" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="ggplot2-communication-s"><span class="header-section-number">4.5.3</span> <code>ggplot2</code> Communication S</h3>
</section>
<section id="chapexercise-5-S" class="level3" data-number="4.5.4">
<h3 data-number="4.5.4" class="anchored" data-anchor-id="chapexercise-5-S"><span class="header-section-number">4.5.4</span> Chapter Exercises S</h3>
<ol type="1">
<li>* Make a line graph that shows the relationship between <code>lifeExp</code> and <code>year</code> for each of the countries in the data set, faceting the graph by continent and also colouring by continent (though this is redundant). Add an x-axis label, a y-axis label, a legend label, and a title to the graph.</li>
</ol>
<div class="cell">

</div>
<ol start="2" type="1">
<li>* Change the colour palette to be CVD-friendly using either <code>scale_colour_brewer()</code> or <code>scale_colour_viridis_d()</code>.</li>
</ol>
<div class="cell">

</div>
<ol start="3" type="1">
<li>* We can see a couple of interesting trends in life expectancy. There is one country in Africa and one country in Asia that sees a sharp decline in life expxectancy at one point. In Europe, there is one country that has a substantially lower life expectancy than the rest in the 1950s but catches up to other European countries by the 2000s. Use <code>filter()</code> to create a data set that only has these 3 countries. Then, use <code>geom_label()</code> to label all three countries on your plot.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>interest_countries <span class="ot">&lt;-</span> country_df <span class="sc">|&gt;</span> <span class="fu">filter</span>((year <span class="sc">==</span> <span class="dv">1952</span> <span class="sc">&amp;</span> continent <span class="sc">==</span> <span class="st">"Europe"</span> <span class="sc">&amp;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    lifeExp <span class="sc">&lt;</span> <span class="dv">50</span>) <span class="sc">|</span> (year <span class="sc">==</span> <span class="dv">1992</span> <span class="sc">&amp;</span> continent <span class="sc">==</span> <span class="st">"Africa"</span> <span class="sc">&amp;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    lifeExp <span class="sc">&lt;</span> <span class="dv">30</span>) <span class="sc">|</span> (year <span class="sc">==</span> <span class="dv">1977</span> <span class="sc">&amp;</span> continent <span class="sc">==</span> <span class="st">"Asia"</span> <span class="sc">&amp;</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    lifeExp <span class="sc">&lt;</span> <span class="dv">35</span>))</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> country_df, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp, <span class="at">group =</span> country,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> continent) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Set2"</span>) <span class="sc">+</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Life Expectancy (Years)"</span>, <span class="at">colour =</span> <span class="st">"Continent"</span>,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Life Expectancy Increases Across time for nearly every country"</span>) <span class="sc">+</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">data =</span> interest_countries, <span class="fu">aes</span>(<span class="at">label =</span> country),</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-comm_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="rcode-5" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="rcode-5"><span class="header-section-number">4.6</span> Non-Exercise <code>R</code> Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>hpi_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/hpi-tidy.csv"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hpi_df)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Countries with a Higher Ecological Footprint Tend to Have Citizens with Longer, Happier Lives"</span>, </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add title</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"HappyLifeYears is a Combination of Life Expectancy and Citizen Well-Being"</span>, </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add subtitle (smaller text size than the title)</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Data Source: http://happyplanetindex.org/countries"</span>, </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>       <span class="do">## add caption to the bottom of the figure</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Ecological Footprint"</span>, <span class="do">## change x axis label</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Happy Life Years"</span>, <span class="do">## change y axis label</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour =</span> <span class="st">"World Region"</span>) <span class="do">## change label of colour legend</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">70</span>))</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Accent"</span>)</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>)</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> Country))</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> hpi_df <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Region) <span class="sc">|&gt;</span></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HPIRank <span class="sc">==</span> <span class="fu">min</span>(HPIRank))</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country))</span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country),</span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a>                   <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears, <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) </span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a>plot_df_us <span class="ot">&lt;-</span> hpi_df <span class="sc">|&gt;</span></span>
<span id="cb36-61"><a href="#cb36-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"United States of America"</span> <span class="sc">|</span> Country <span class="sc">==</span> <span class="st">"Denmark"</span>)</span>
<span id="cb36-62"><a href="#cb36-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-63"><a href="#cb36-63" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-64"><a href="#cb36-64" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-65"><a href="#cb36-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-66"><a href="#cb36-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-67"><a href="#cb36-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>,</span>
<span id="cb36-68"><a href="#cb36-68" aria-hidden="true" tabindex="-1"></a>             <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-69"><a href="#cb36-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country),</span>
<span id="cb36-70"><a href="#cb36-70" aria-hidden="true" tabindex="-1"></a>                   <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb36-71"><a href="#cb36-71" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb36-72"><a href="#cb36-72" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-73"><a href="#cb36-73" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-74"><a href="#cb36-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-75"><a href="#cb36-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-76"><a href="#cb36-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-77"><a href="#cb36-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-78"><a href="#cb36-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_solarized</span>()</span>
<span id="cb36-79"><a href="#cb36-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-80"><a href="#cb36-80" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-81"><a href="#cb36-81" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-82"><a href="#cb36-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-83"><a href="#cb36-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-84"><a href="#cb36-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-85"><a href="#cb36-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-86"><a href="#cb36-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_fivethirtyeight</span>()</span>
<span id="cb36-87"><a href="#cb36-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-88"><a href="#cb36-88" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-89"><a href="#cb36-89" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-90"><a href="#cb36-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-91"><a href="#cb36-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb36-92"><a href="#cb36-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> plot_df_us, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-93"><a href="#cb36-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> plot_df_us, <span class="fu">aes</span>(<span class="at">label =</span> Country), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb36-94"><a href="#cb36-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span>
<span id="cb36-95"><a href="#cb36-95" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> hpi_df, <span class="fu">aes</span>(<span class="at">x =</span> Footprint, <span class="at">y =</span> HappyLifeYears,</span>
<span id="cb36-96"><a href="#cb36-96" aria-hidden="true" tabindex="-1"></a>                          <span class="at">colour =</span> Region)) <span class="sc">+</span></span>
<span id="cb36-97"><a href="#cb36-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03-dplyr.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Wrangling with <code>dplyr</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./14-workflow.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Workflow and Other Skills</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Course Materials were written by Matt Higham for STAT/DATA 234 at St.&nbsp;Lawrence University.</div>   
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>