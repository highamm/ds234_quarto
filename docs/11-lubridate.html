<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DATA / STAT 234 - 12&nbsp; Dates with lubridate</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./12-stringr.html" rel="next">
<link href="./10-merging.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dates with <code>lubridate</code></span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DATA / STAT 234</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Syllabus and Course Information</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">The Core</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <code>R</code> and <code>R Studio</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-ggplot2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Plotting with <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-dplyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Wrangling with <code>dplyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-comm.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Communication with <code>Quarto</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-workflow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Workflow and Other Skills</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Data Wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-tidyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Tidying with <code>tidyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Coding in Base <code>R</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-forcats.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Factors with <code>forcats</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-ethics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Ethics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-import.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Import</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-merging.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Merging with <code>dplyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Special Topics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-lubridate.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dates with <code>lubridate</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-stringr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Text Data with <code>tidytext</code> and <code>stringr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-knn.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Predictive Modeling with knn</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-connections.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Connections to STAT 113, STAT 213, and CS 140</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-sql.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Introduction to SQL with <code>dbplyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#converting-variables-to-date" id="toc-converting-variables-to-date" class="nav-link active" data-scroll-target="#converting-variables-to-date"> <span class="header-section-number">12.1</span> Converting Variables to <code>&lt;date&gt;</code></a>
  <ul class="collapse">
  <li><a href="#from-chr-to-date" id="toc-from-chr-to-date" class="nav-link" data-scroll-target="#from-chr-to-date"> <span class="header-section-number">12.1.1</span> From <code>&lt;chr&gt;</code> to <code>&lt;date&gt;</code></a></li>
  <li><a href="#making-a-date-variable-from-date-components" id="toc-making-a-date-variable-from-date-components" class="nav-link" data-scroll-target="#making-a-date-variable-from-date-components"> <span class="header-section-number">12.1.2</span> Making a <code>&lt;date&gt;</code> variable from Date Components</a></li>
  <li><a href="#exercise-11-1" id="toc-exercise-11-1" class="nav-link" data-scroll-target="#exercise-11-1"> <span class="header-section-number">12.1.3</span> Exercises</a></li>
  </ul></li>
  <li><a href="#functions-for-date-variables" id="toc-functions-for-date-variables" class="nav-link" data-scroll-target="#functions-for-date-variables"> <span class="header-section-number">12.2</span> Functions for <code>&lt;date&gt;</code> Variables</a>
  <ul class="collapse">
  <li><a href="#year-month-and-mday" id="toc-year-month-and-mday" class="nav-link" data-scroll-target="#year-month-and-mday"> <span class="header-section-number">12.2.1</span> <code>year()</code>, <code>month()</code>, and <code>mday()</code></a></li>
  <li><a href="#yday-and-wday" id="toc-yday-and-wday" class="nav-link" data-scroll-target="#yday-and-wday"> <span class="header-section-number">12.2.2</span> <code>yday()</code> and <code>wday()</code></a></li>
  <li><a href="#exercise-11-2" id="toc-exercise-11-2" class="nav-link" data-scroll-target="#exercise-11-2"> <span class="header-section-number">12.2.3</span> Exercises</a></li>
  </ul></li>
  <li><a href="#chapexercise-11" id="toc-chapexercise-11" class="nav-link" data-scroll-target="#chapexercise-11"> <span class="header-section-number">12.3</span> Chapter Exercises</a></li>
  <li><a href="#solutions-11" id="toc-solutions-11" class="nav-link" data-scroll-target="#solutions-11"> <span class="header-section-number">12.4</span> Exercise Solutions</a>
  <ul class="collapse">
  <li><a href="#converting-variables-to-date-s" id="toc-converting-variables-to-date-s" class="nav-link" data-scroll-target="#converting-variables-to-date-s"> <span class="header-section-number">12.4.1</span> Converting Variables to <code>&lt;date&gt;</code> S</a></li>
  <li><a href="#functions-for-date-variables-s" id="toc-functions-for-date-variables-s" class="nav-link" data-scroll-target="#functions-for-date-variables-s"> <span class="header-section-number">12.4.2</span> Functions for <code>&lt;date&gt;</code> Variables S</a></li>
  <li><a href="#chapexercise-11-S" id="toc-chapexercise-11-S" class="nav-link" data-scroll-target="#chapexercise-11-S"> <span class="header-section-number">12.4.3</span> Chapter Exercises S</a></li>
  </ul></li>
  <li><a href="#rcode-11" id="toc-rcode-11" class="nav-link" data-scroll-target="#rcode-11"> <span class="header-section-number">12.5</span> Non-Exercise <code>R</code> Code</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="lubridate" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dates with <code>lubridate</code></span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><strong>Goals</strong>:</p>
<ul>
<li>use <code>lubridate</code> functions to convert a character variable to a <code>&lt;date&gt;</code> variable.</li>
<li>use <code>lubridate</code> functions to extract useful information from a <code>&lt;date&gt;</code> variable, including the year, month, day of the week, and day of the year.</li>
</ul>
<section id="converting-variables-to-date" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="converting-variables-to-date"><span class="header-section-number">12.1</span> Converting Variables to <code>&lt;date&gt;</code></h2>
<p>The <code>lubridate</code> package is built to easily work with <code>Date</code> objects and <code>DateTime</code> objects. <code>R</code> does not actually have a class that stores <code>Time</code> objects (unless you install a separate package). Dates tend to be much more common than Times, so, we will primarily focus on Dates, but most functions we will see have easy extensions to Times.</p>
<p>To begin, install the <code>lubridate</code> package, and load the package with <code>library()</code>. The <code>today()</code> function prints today’s date while <code>now()</code> prints today’s date and time. These can sometimes be useful in other contexts, but we will just run the code to see how <code>R</code> stores dates and date-times.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-02-15"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-02-15 14:53:12 EST"</code></pre>
</div>
</div>
<p>This first section will deal with how to convert a variable in <code>R</code> to be a <code>Date</code>. We will use a data set that has the holidays of Animal Crossing from January to April. The columns in this data set are:</p>
<ul>
<li><code>Holiday</code>, the name of the holiday and</li>
<li>various other columns with different date formats</li>
</ul>
<p>Read in the data set with</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/animal_crossing_holidays.csv"</span>))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>holiday_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 10
  Holiday         Date1     Date2     Date3 Date4 Date5 Month  Year   Day Month2
  &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 New Year's Day  1-Jan-20  Jan-1-20… 1/1/… 1/1/… 2020…     1  2020     1 Janua…
2 Groundhog Day   2-Feb-20  Feb-2-20… 2/2/… 2/2/… 2020…     2  2020     2 Febru…
3 Valentine's Day 14-Feb-20 Feb-14-2… 2/14… 2020… 2020…     2  2020    14 Febru…
4 Shamrock Day    17-Mar-20 Mar-17-2… 3/17… 2020… 2020…     3  2020    17 March 
5 Bunny Day       12-Apr-20 Apr-12-2… 4/12… 12/4… 2020…     4  2020    12 April 
6 Earth Day       22-Apr-20 Apr-22-2… 4/22… 2020… 2020…     4  2020    22 April </code></pre>
</div>
</div>
<p>Which columns were specified as Dates? In this example, none of the columns have the <code>&lt;date&gt;</code> specification: all of the date columns are read in as character variables.</p>
<section id="from-chr-to-date" class="level3" data-number="12.1.1">
<h3 data-number="12.1.1" class="anchored" data-anchor-id="from-chr-to-date"><span class="header-section-number">12.1.1</span> From <code>&lt;chr&gt;</code> to <code>&lt;date&gt;</code></h3>
<p>We will use the <code>dmy()</code> series of functions in <code>lubridate</code> to convert character variables to dates. We will typically pair this new function with a <code>mutate()</code> statement: much like the <code>forcats</code> functions, we are almost always <strong>creating</strong> a new variable.</p>
<p>There are a series of <code>dmy()</code>-type variables, each corresponding to a different Day-Month-Year order.</p>
<ul>
<li><code>dmy()</code> is used to parse a date from a character vector that has the day first, month second, and year last.</li>
<li><code>ymd()</code> is used to parse a date that has year first, month second, and date last</li>
<li><code>ydm()</code> is used to parse a date that has year first, day second, and month last,….</li>
</ul>
<p>and <code>dym()</code>, <code>mdy()</code>, and <code>myd()</code> work similarly. <code>lubridate</code> is usually “smart” and picks up dates in all kinds of different formats (e.g.&nbsp;it can pick up specifying <code>October</code> as the month and <code>Oct</code> as the month and <code>10</code> as the month).</p>
<p>Let’s try it out on <code>Date1</code> and <code>Date2</code>:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">dmy</span>(Date1)) <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  Date_test  Holiday      Date1 Date2 Date3 Date4 Date5 Month  Year   Day Month2
  &lt;date&gt;     &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 2020-01-01 New Year's … 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1 Janua…
2 2020-02-02 Groundhog D… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2 Febru…
3 2020-02-14 Valentine's… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14 Febru…
4 2020-03-17 Shamrock Day 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17 March 
5 2020-04-12 Bunny Day    12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12 April 
6 2020-04-22 Earth Day    22-A… Apr-… 4/22… 2020… 2020…     4  2020    22 April </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">mdy</span>(Date2)) <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  Date_test  Holiday      Date1 Date2 Date3 Date4 Date5 Month  Year   Day Month2
  &lt;date&gt;     &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 2020-01-01 New Year's … 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1 Janua…
2 2020-02-02 Groundhog D… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2 Febru…
3 2020-02-14 Valentine's… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14 Febru…
4 2020-03-17 Shamrock Day 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17 March 
5 2020-04-12 Bunny Day    12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12 April 
6 2020-04-22 Earth Day    22-A… Apr-… 4/22… 2020… 2020…     4  2020    22 April </code></pre>
</div>
</div>
<p><strong>A Reminder</strong>: Why do <code>&lt;date&gt;</code> objects even matter? Compare the following two plots: one made where the date is in <code>&lt;chr&gt;</code> form and the other where date is in its appropriate <code>&lt;date&gt;</code> form.</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> holiday_df, <span class="fu">aes</span>(<span class="at">x =</span> Date1, <span class="at">y =</span> Holiday)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="ot">&lt;-</span> holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test_plot =</span> <span class="fu">dmy</span>(Date1)) <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test_plot, <span class="fu">everything</span>())</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> holiday_df, <span class="fu">aes</span>(<span class="at">x =</span> Date_test_plot, <span class="at">y =</span> Holiday)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In which plot does the ordering on the x-axis make more sense?</p>
</section>
<section id="making-a-date-variable-from-date-components" class="level3" data-number="12.1.2">
<h3 data-number="12.1.2" class="anchored" data-anchor-id="making-a-date-variable-from-date-components"><span class="header-section-number">12.1.2</span> Making a <code>&lt;date&gt;</code> variable from Date Components</h3>
<p>Another way to create a Date object is to assemble it with <code>make_date()</code> from a month, day, and year components, each stored in a separate column:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test2 =</span> <span class="fu">make_date</span>(<span class="at">year =</span> Year,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">month =</span> Month,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">day =</span> Day)) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test2, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test2 Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2020-01-01 2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 2020-02-02 2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 2020-02-14 2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 2020-03-17 2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 2020-04-12 2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 2020-04-22 2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
</div>
<p>But, when <code>Month</code> is stored as a character (e.g.&nbsp;<code>February</code>) instead of a number (e.g.&nbsp;<code>2</code>), problems arise with the <code>make_date()</code> function:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test2 =</span> <span class="fu">make_date</span>(<span class="at">year =</span> Year,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">month =</span> Month2,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">day =</span> Day)) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test2, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in make_date(year = Year, month = Month2, day = Day): NAs introduced by
coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test2 Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 NA         2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 NA         2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 NA         2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 NA         2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 NA         2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 NA         2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
</div>
<p>So the <code>make_date()</code> function requires a specific format for the year, month, and day columns. It may take a little pre-processing to put a particular data set in that format.</p>
</section>
<section id="exercise-11-1" class="level3" data-number="12.1.3">
<h3 data-number="12.1.3" class="anchored" data-anchor-id="exercise-11-1"><span class="header-section-number">12.1.3</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-11).</p>
<ol type="1">
<li>* What’s the issue with trying to convert <code>Date4</code> to a <code>&lt;date&gt;</code> form? You may want to investigate <code>Date4</code> further to answer this question.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">ymd</span>(Date4)) <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 3 failed to parse.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test  Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2001-01-20 2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 2002-02-20 2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 NA         2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 NA         2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 2012-04-20 2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 NA         2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>* Practice converting <code>Date3</code> and <code>Date5</code> to <code>&lt;date&gt;</code> variables with <code>lubridate</code> functions.</li>
</ol>
</section>
</section>
<section id="functions-for-date-variables" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="functions-for-date-variables"><span class="header-section-number">12.2</span> Functions for <code>&lt;date&gt;</code> Variables</h2>
<p>Once an object is in the <code>&lt;date&gt;</code> format, there are some special functions in <code>lubridate</code> that can be used on that date variable. To investigate some of these functions, we will pull stock market data from Yahoo using the <code>quantmod</code> package. Install the package, and run the following code, which gets stock market price data on Apple, Nintendo, Chipotle, and the S &amp; P 500 Index from 2011 to now. Note that you have the ability to understand all of the code below, but we will skip over this code for now to focus more on the new information in this section (information about date functions).</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages("quantmod")</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2011-01-01"</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>end <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2021-5-19"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="fu">c</span>(<span class="st">"AAPL"</span>, <span class="st">"NTDOY"</span>, <span class="st">"CMG"</span>, <span class="st">"SPY"</span>), <span class="at">src =</span> <span class="st">"yahoo"</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">from =</span> start, <span class="at">to =</span> end)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AAPL"  "NTDOY" "CMG"   "SPY"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>date_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">index</span>(AAPL)) <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">start_date =</span> value)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>app_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(AAPL)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>nint_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(NTDOY)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>chip_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(CMG)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>spy_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(SPY)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>all_stocks <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(date_tib, app_tib, nint_tib, chip_tib, spy_tib)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="ot">&lt;-</span> all_stocks <span class="sc">|&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(start_date, AAPL.Adjusted, NTDOY.Adjusted,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                      CMG.Adjusted, SPY.Adjusted) <span class="sc">|&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">names_to =</span> <span class="st">"Stock_Type"</span>, <span class="at">values_to =</span> <span class="st">"Price"</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Stock_Type =</span> <span class="fu">fct_recode</span>(Stock_Type,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Apple =</span> <span class="st">"AAPL.Adjusted"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Nintendo =</span> <span class="st">"NTDOY.Adjusted"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Chipotle =</span> <span class="st">"CMG.Adjusted"</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">`</span><span class="at">S &amp; P 500</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"SPY.Adjusted"</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>                                 ))</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(stocks_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  start_date Stock_Type  Price
  &lt;date&gt;     &lt;fct&gt;       &lt;dbl&gt;
1 2021-05-17 Chipotle   1332. 
2 2021-05-17 S &amp; P 500   405. 
3 2021-05-18 Apple       124. 
4 2021-05-18 Nintendo     14.1
5 2021-05-18 Chipotle   1325. 
6 2021-05-18 S &amp; P 500   401. </code></pre>
</div>
</div>
<p>You’ll have a chance in the Exercises to choose your own stocks to investigate. For now, I’ve made a data set with three variables:</p>
<ul>
<li><code>start_date</code>, the opening date for the stock market</li>
<li><code>Stock_Type</code>, a factor with 4 levels: <code>Apple</code>, <code>Nintendo</code>, <code>Chipotle</code>, and <code>S &amp; P 500</code></li>
<li><code>Price</code>, the price of the stock?</li>
</ul>
<p>First, let’s make a line plot that shows how the S &amp; P 500 has changed over time:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>stocks_sp <span class="ot">&lt;-</span> stocks_long <span class="sc">|&gt;</span> <span class="fu">filter</span>(Stock_Type <span class="sc">==</span> <span class="st">"S &amp; P 500"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> stocks_sp, <span class="fu">aes</span>(<span class="at">x =</span> start_date, <span class="at">y =</span> Price)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>But, there’s other information that we can get from the <code>start_date</code> variable. We might be interested in things like day of the week, monthly trends, or yearly trends. To extract variables like “weekday” and “month” from a <code>&lt;date&gt;</code> variable, there are a series of functions that are fairly straightforward to use. We will discuss the <code>year()</code> <code>month()</code>, <code>mday()</code>, <code>yday()</code>, and <code>wday()</code> functions.</p>
<section id="year-month-and-mday" class="level3" data-number="12.2.1">
<h3 data-number="12.2.1" class="anchored" data-anchor-id="year-month-and-mday"><span class="header-section-number">12.2.1</span> <code>year()</code>, <code>month()</code>, and <code>mday()</code></h3>
<p>The functions <code>year()</code>, <code>month()</code>, and <code>mday()</code> can grab the year, month, and day of the month, respectively, from a <code>&lt;date&gt;</code> variable. Like the <code>forcats</code> functions, these will almost always be paired with a <code>mutate()</code> statement because they will create a new variable:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year_stock =</span> <span class="fu">year</span>(start_date))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">month_stock =</span> <span class="fu">month</span>(start_date))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_stock =</span> <span class="fu">mday</span>(start_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="yday-and-wday" class="level3" data-number="12.2.2">
<h3 data-number="12.2.2" class="anchored" data-anchor-id="yday-and-wday"><span class="header-section-number">12.2.2</span> <code>yday()</code> and <code>wday()</code></h3>
<p>The <code>yday()</code> function grabs the day of the year from a <code>&lt;date&gt;</code> object. For example,</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"November 4, 2020"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">yday</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 309</code></pre>
</div>
</div>
<p>returns <code>309</code>, indicating that November 4th is the 309th day of the year 2020. Using this function in a <code>mutate()</code> statement creates a new variable that has <code>yday</code> for each observation:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_in_year =</span> <span class="fu">yday</span>(start_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,444 × 4
   start_date Stock_Type  Price day_in_year
   &lt;date&gt;     &lt;fct&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1 2011-01-03 Apple       10.0            3
 2 2011-01-03 Nintendo     7.34           3
 3 2011-01-03 Chipotle   224.             3
 4 2011-01-03 S &amp; P 500  101.             3
 5 2011-01-04 Apple       10.1            4
 6 2011-01-04 Nintendo     7.1            4
 7 2011-01-04 Chipotle   222.             4
 8 2011-01-04 S &amp; P 500  101.             4
 9 2011-01-05 Apple       10.2            5
10 2011-01-05 Nintendo     6.92           5
# … with 10,434 more rows</code></pre>
</div>
</div>
<p>Finally, the function <code>wday()</code> grabs the day of the week from a <code>&lt;date&gt;</code>. By default, <code>wday()</code> puts the day of the week as a numeric, but I find this confusing, as I can’t ever remember whether a <code>1</code> means <code>Sunday</code> or a <code>1</code> means <code>Monday</code>. Adding, <code>label = TRUE</code> creates the weekday variable as <code>Sunday</code>, <code>Monday</code>, <code>Tuesday</code>, etc.:</p>
<div class="cell" data-appendix="true">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">wday</span>(start_date))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">wday</span>(start_date,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Possible uses for these functions are:</p>
<ul>
<li><p>you want to look at differences between years (with <code>year()</code>)</p></li>
<li><p>you want to look at differences between months (with <code>month()</code>)</p></li>
<li><p>you want to look at differences between days of the week (with <code>wday()</code>)</p></li>
<li><p>you want to see whether there are yearly trends <strong>within years</strong> (with <code>yday()</code>)</p></li>
</ul>
<p><strong>Note</strong>: Working with times is extremely similar to working with dates. Instead of <code>ymd()</code>, <code>mdy()</code>, etc., you tack on a few extra letters to specify the order that the hour, minute, and seconds appear in the variable: <code>ymd_hms()</code> converts a character vector that has the order year, month, day, hour, minute, second to a <code>&lt;datetime&gt;</code>.</p>
<p>Additionally, the functions <code>hour()</code>, <code>minute()</code>, and <code>second()</code> grab the hour, minute, and second from a <code>&lt;datetime&gt;</code> variable.</p>
<p><strong>Note on Complications</strong>: Things can get complicated, especially if you start to consider things like time <strong>duration</strong>. The reason is that our time system is inherently confusing. Consider how the following might affect an analysis involving time duration:</p>
<ul>
<li>time zones</li>
<li>leap years (not all years have the same number of days)</li>
<li>differing number of days in a given month</li>
<li>daylight saving time (not all days have the same number of hours)</li>
</ul>
</section>
<section id="exercise-11-2" class="level3" data-number="12.2.3">
<h3 data-number="12.2.3" class="anchored" data-anchor-id="exercise-11-2"><span class="header-section-number">12.2.3</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-11).</p>
<ol type="1">
<li>The <code>month()</code> function gives the numbers corresponding to each month by default. Type <code>?month</code> and figure out which argument you would need to change to get the <strong>names</strong> (January, February, etc.) instead of the month numbers. What about the <strong>abbreviations</strong> (Jan, Feb, etc.) of each month instead of the month numbers? Try making the changes in the <code>mutate()</code> statement below.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">month_stock =</span> <span class="fu">month</span>(start_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="chapexercise-11" class="level2" data-number="12.3">
<h2 data-number="12.3" class="anchored" data-anchor-id="chapexercise-11"><span class="header-section-number">12.3</span> Chapter Exercises</h2>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at @ref(solutions-11).</p>
<p>The <code>truncated</code> argument to <code>ymd()</code>, <code>dmy()</code>, <code>mdy()</code>, etc. will allow <code>R</code> to parse dates that aren’t actually complete. For example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">"2019"</span>, <span class="at">truncated =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2019-01-01"</code></pre>
</div>
</div>
<p>parses <code>2019</code> to be January 1, 2019 when the month and day are missing. The <code>2</code> means that the last two parts of the date (in this case, month and day) are allowed to be missing. Similarly,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">"19-10"</span>, <span class="at">truncated =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0000-10-19"</code></pre>
</div>
</div>
<p>truncates the year (which is given as 0000). The truncate function is usually most useful in the context of the first example with a truncated month and/or day.</p>
<p>Examine the <code>ds_google.csv</code>, which contains</p>
<ul>
<li><code>Month</code>, the year and month from 2004 to now</li>
<li><code>Data_Science</code>, the relative popularity of data science (Google keeps how it calculates “popularity” as somewhat of a mystery but it is likely based off of the number of times people search for the term “Data Science”)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>ds_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/ds_google.csv"</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>ds_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 202 × 2
   Month   Data_Science
   &lt;chr&gt;          &lt;dbl&gt;
 1 2004-01           14
 2 2004-02            8
 3 2004-03           16
 4 2004-04           11
 5 2004-05            5
 6 2004-06            8
 7 2004-07            7
 8 2004-08            9
 9 2004-09           13
10 2004-10           11
# … with 192 more rows</code></pre>
</div>
</div>
<ol type="1">
<li>* Use a <code>lubridate</code> function with the <code>truncated</code> option to convert the <code>Month</code> variable to be in the <code>&lt;date&gt;</code> format.</li>
</ol>
<div class="cell">

</div>
<ol start="2" type="1">
<li>* Make a plot of the popularity of Data Science through Time. Add a smoother to your plot. What patterns do you notice?</li>
</ol>
<div class="cell">

</div>
<p>The data was obtained from Google Trends: <a href="https://trends.google.com/trends/?geo=US" target="_blank">Google Trends</a>. Google Trends is incredibly cool to explore, even without <code>R</code>.</p>
<ol start="3" type="1">
<li>* On Google Trends, Enter in a search term, and change the Time dropdown menu to be 2004-present. Then, enter in a second search term that you want to compare. You can also change the country if you want to (or, you can keep the country as United States).</li>
</ol>
<p>My search terms will be “super smash” and “animal crossing”, but yours should be something that interests you!</p>
<p>In the top-right window of the graph, you should click the down arrow to download the data set. Delete the first two rows of your data set (either in Excel or <code>R</code>), read in the data set, and change the date variable so that it’s in a Date format.</p>
<div class="cell">

</div>
<ol start="4" type="1">
<li>* Make a plot of your Popularity variables through time. <strong>Hint</strong>: Does the data set need to be tidied at all first?</li>
</ol>
<div class="cell">

</div>
<ol start="5" type="1">
<li><p>* Using your data set that explored a variable or two from 2004 through now, make a table of the <strong>average</strong> popularity for each year. <strong>Hint</strong>: You’ll need a lubridate function to extract the year variable from the date object.</p></li>
<li><p>* Clear your search and now enter a search term that you’d like to investigate for the past 90 days. Mine will be “Pittsburgh Steelers” but, again, yours should be something that interests you.</p></li>
</ol>
<p>Again, click the download button again and read in the data to <code>R</code>. Convert the date variable to be in <code>&lt;date&gt;</code> format.</p>
<div class="cell">

</div>
<ol start="7" type="1">
<li>* Make a plot of your popularity variable through time, adding a smoother.</li>
</ol>
<div class="cell">

</div>
<ol start="8" type="1">
<li><p>Using your data set that explored a variable from the past 90 days, construct a table that compares the <strong>average</strong> popularity on each day of the week (Monday through Saturday).</p></li>
<li><p>Examine the <code>ds_df</code> data set again, the data set on data science in Google Trends, and suppose that you have an observation for <strong>each</strong> day of every year (not just one observation per month). You want to look at whether data science is more popular on certain days of the week. Explain why the following strategy <strong>wouldn’t</strong> really work that well.</p></li>
</ol>
<ul>
<li>create a weekday variable with <code>wday()</code></li>
<li>use <code>summarise()</code> and <code>group_by()</code> to find the average popularity for each day of the week</li>
</ul>
<ol start="10" type="1">
<li>Use the code in the tutorial section on the Stocks data to get a data frame on stock prices for a couple of different stocks that interest you. The start and end date that you use are completely up to you.</li>
</ol>
<p>Explore the stock data that you chose, constructing a line plot of the price through time, as well as any graphs or summaries that show interesting patterns across years, months, days, days of the week, etc.</p>
<ol start="11" type="1">
<li>Use the <code>lag()</code> function to create a new variable that is the previous day’s stock price. Can you predict the current stock price based on the previous day’s stock price accurately? Why or why not? Use either graphical or numerical evidence.</li>
</ol>
</section>
<section id="solutions-11" class="level2" data-number="12.4">
<h2 data-number="12.4" class="anchored" data-anchor-id="solutions-11"><span class="header-section-number">12.4</span> Exercise Solutions</h2>
<section id="converting-variables-to-date-s" class="level3" data-number="12.4.1">
<h3 data-number="12.4.1" class="anchored" data-anchor-id="converting-variables-to-date-s"><span class="header-section-number">12.4.1</span> Converting Variables to <code>&lt;date&gt;</code> S</h3>
<ol type="1">
<li>* What’s the issue with trying to convert <code>Date4</code> to a <code>&lt;date&gt;</code> form?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">ymd</span>(Date4)) <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 3 failed to parse.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test  Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2001-01-20 2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 2002-02-20 2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 NA         2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 NA         2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 2012-04-20 2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 NA         2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Date4 has two __different__ formats, </span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="do">## which creates problems for `lubridate` functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>* Practice converting <code>Date3</code> and <code>Date5</code> to date objects with <code>lubridate</code> functions.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">mdy</span>(Date3)) <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test  Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2020-01-01 2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 2020-02-02 2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 2020-02-14 2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 2020-03-17 2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 2020-04-12 2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 2020-04-22 2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">ymd</span>(Date5)) <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  Date_test  Date_test…¹ Holiday Date1 Date2 Date3 Date4 Date5 Month  Year   Day
  &lt;date&gt;     &lt;date&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 2020-01-01 2020-01-01  New Ye… 1-Ja… Jan-… 1/1/… 1/1/… 2020…     1  2020     1
2 2020-02-02 2020-02-02  Ground… 2-Fe… Feb-… 2/2/… 2/2/… 2020…     2  2020     2
3 2020-02-14 2020-02-14  Valent… 14-F… Feb-… 2/14… 2020… 2020…     2  2020    14
4 2020-03-17 2020-03-17  Shamro… 17-M… Mar-… 3/17… 2020… 2020…     3  2020    17
5 2020-04-12 2020-04-12  Bunny … 12-A… Apr-… 4/12… 12/4… 2020…     4  2020    12
6 2020-04-22 2020-04-22  Earth … 22-A… Apr-… 4/22… 2020… 2020…     4  2020    22
# … with 1 more variable: Month2 &lt;chr&gt;, and abbreviated variable name
#   ¹​Date_test_plot</code></pre>
</div>
</div>
</section>
<section id="functions-for-date-variables-s" class="level3" data-number="12.4.2">
<h3 data-number="12.4.2" class="anchored" data-anchor-id="functions-for-date-variables-s"><span class="header-section-number">12.4.2</span> Functions for <code>&lt;date&gt;</code> Variables S</h3>
</section>
<section id="chapexercise-11-S" class="level3" data-number="12.4.3">
<h3 data-number="12.4.3" class="anchored" data-anchor-id="chapexercise-11-S"><span class="header-section-number">12.4.3</span> Chapter Exercises S</h3>
<ol type="1">
<li>* Use a <code>lubridate</code> function with the <code>truncated</code> option to convert the <code>Month</code> variable to be in the <code>&lt;date&gt;</code> format.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>ds_df <span class="ot">&lt;-</span> ds_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">ymd</span>(Month, <span class="at">truncated =</span> <span class="dv">1</span>))</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>ds_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>* Make a plot of the popularity of Data Science through Time. Add a smoother to your plot. What patterns do you notice?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ds_df, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Data_Science)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="do">## it's like super popular!!!!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>* On Google Trends, Enter in a search term, and change the Time dropdown menu to be 2004-present. Then, enter in a second search term that you want to compare. You can also change the country if you want to (or, you can keep the country as United States).</li>
</ol>
<p>My search terms will be “super smash” and “animal crossing”, but yours should be something that interests you!</p>
<p>In the top-right window of the graph, you should click the down arrow to download the data set. Delete the first two rows of your data set (either in Excel or <code>R</code>), read in the data set, and change the date variable so that it’s in a Date format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>videogame_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/smash_animal_crossing.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 203 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): Month
dbl (2): super_smash, animal_crossing

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>videogame_df <span class="ot">&lt;-</span> videogame_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">ymd</span>(Month, <span class="at">truncated =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>* Make a plot of your Popularity variables through time. <strong>Hint</strong>: Does the data set need to be tidied at all first?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>videogame_long <span class="ot">&lt;-</span> videogame_df <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"super_smash"</span>, <span class="st">"animal_crossing"</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">names_to =</span> <span class="st">"game"</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">values_to =</span> <span class="st">"popularity"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> videogame_long, <span class="fu">aes</span>(<span class="at">x =</span> date, </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">y =</span> popularity,</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">colour =</span> game)) <span class="sc">+</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>(<span class="at">begin =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="fl">0.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="5" type="1">
<li><p>* Using your data set that explored a variable or two from 2004 through now, make a table of the <strong>average</strong> popularity for each year. <strong>Hint</strong>: You’ll need a lubridate function to extract the year variable from the date object.</p></li>
<li><p>* Clear your search and now enter a search term that you’d like to investigate for the past 90 days. Mine will be “pittsburgh steelers” but, again, yours should be something that interests you.</p></li>
</ol>
<p>Again, click the download button again and read in the data to <code>R</code>. Convert the date variable to be in <code>&lt;date&gt;</code> format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>steelers_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/steelers.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 91 Columns: 2
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): Day
dbl (1): Steelers

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>steelers_df <span class="ot">&lt;-</span> steelers_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_var =</span> <span class="fu">mdy</span>(Day))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="7" type="1">
<li>* Make a plot of your popularity variable through time, adding a smoother.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> steelers_df, <span class="fu">aes</span>(<span class="at">x =</span> day_var, <span class="at">y =</span> Steelers)) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Popularity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="11-lubridate_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="rcode-11" class="level2" data-number="12.5">
<h2 data-number="12.5" class="anchored" data-anchor-id="rcode-11"><span class="header-section-number">12.5</span> Non-Exercise <code>R</code> Code</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/animal_crossing_holidays.csv"</span>))</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>holiday_df</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">dmy</span>(Date1)) <span class="sc">|&gt;</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test =</span> <span class="fu">mdy</span>(Date2)) <span class="sc">|&gt;</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test, <span class="fu">everything</span>())</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> holiday_df, <span class="fu">aes</span>(<span class="at">x =</span> Date1, <span class="at">y =</span> Holiday)) <span class="sc">+</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="ot">&lt;-</span> holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test_plot =</span> <span class="fu">dmy</span>(Date1)) <span class="sc">|&gt;</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test_plot, <span class="fu">everything</span>())</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> holiday_df, <span class="fu">aes</span>(<span class="at">x =</span> Date_test_plot, <span class="at">y =</span> Holiday)) <span class="sc">+</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test2 =</span> <span class="fu">make_date</span>(<span class="at">year =</span> Year,</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">month =</span> Month,</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">day =</span> Day)) <span class="sc">|&gt;</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test2, <span class="fu">everything</span>())</span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>holiday_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Date_test2 =</span> <span class="fu">make_date</span>(<span class="at">year =</span> Year,</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">month =</span> Month2,</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">day =</span> Day)) <span class="sc">|&gt;</span></span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_test2, <span class="fu">everything</span>())</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages("quantmod")</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2011-01-01"</span>)</span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>end <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2021-5-19"</span>)</span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="fu">c</span>(<span class="st">"AAPL"</span>, <span class="st">"NTDOY"</span>, <span class="st">"CMG"</span>, <span class="st">"SPY"</span>), <span class="at">src =</span> <span class="st">"yahoo"</span>,</span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">from =</span> start, <span class="at">to =</span> end)</span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>date_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">index</span>(AAPL)) <span class="sc">|&gt;</span></span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">start_date =</span> value)</span>
<span id="cb60-36"><a href="#cb60-36" aria-hidden="true" tabindex="-1"></a>app_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(AAPL)</span>
<span id="cb60-37"><a href="#cb60-37" aria-hidden="true" tabindex="-1"></a>nint_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(NTDOY)</span>
<span id="cb60-38"><a href="#cb60-38" aria-hidden="true" tabindex="-1"></a>chip_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(CMG)</span>
<span id="cb60-39"><a href="#cb60-39" aria-hidden="true" tabindex="-1"></a>spy_tib <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(SPY)</span>
<span id="cb60-40"><a href="#cb60-40" aria-hidden="true" tabindex="-1"></a>all_stocks <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(date_tib, app_tib, nint_tib, chip_tib, spy_tib)</span>
<span id="cb60-41"><a href="#cb60-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-42"><a href="#cb60-42" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="ot">&lt;-</span> all_stocks <span class="sc">|&gt;</span></span>
<span id="cb60-43"><a href="#cb60-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(start_date, AAPL.Adjusted, NTDOY.Adjusted,</span>
<span id="cb60-44"><a href="#cb60-44" aria-hidden="true" tabindex="-1"></a>                      CMG.Adjusted, SPY.Adjusted) <span class="sc">|&gt;</span></span>
<span id="cb60-45"><a href="#cb60-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">names_to =</span> <span class="st">"Stock_Type"</span>, <span class="at">values_to =</span> <span class="st">"Price"</span>) <span class="sc">|&gt;</span></span>
<span id="cb60-46"><a href="#cb60-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Stock_Type =</span> <span class="fu">fct_recode</span>(Stock_Type,</span>
<span id="cb60-47"><a href="#cb60-47" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Apple =</span> <span class="st">"AAPL.Adjusted"</span>,</span>
<span id="cb60-48"><a href="#cb60-48" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Nintendo =</span> <span class="st">"NTDOY.Adjusted"</span>,</span>
<span id="cb60-49"><a href="#cb60-49" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">Chipotle =</span> <span class="st">"CMG.Adjusted"</span>,</span>
<span id="cb60-50"><a href="#cb60-50" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">`</span><span class="at">S &amp; P 500</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"SPY.Adjusted"</span></span>
<span id="cb60-51"><a href="#cb60-51" aria-hidden="true" tabindex="-1"></a>                                 ))</span>
<span id="cb60-52"><a href="#cb60-52" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(stocks_long)</span>
<span id="cb60-53"><a href="#cb60-53" aria-hidden="true" tabindex="-1"></a>stocks_sp <span class="ot">&lt;-</span> stocks_long <span class="sc">|&gt;</span> <span class="fu">filter</span>(Stock_Type <span class="sc">==</span> <span class="st">"S &amp; P 500"</span>)</span>
<span id="cb60-54"><a href="#cb60-54" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> stocks_sp, <span class="fu">aes</span>(<span class="at">x =</span> start_date, <span class="at">y =</span> Price)) <span class="sc">+</span></span>
<span id="cb60-55"><a href="#cb60-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb60-56"><a href="#cb60-56" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year_stock =</span> <span class="fu">year</span>(start_date))</span>
<span id="cb60-57"><a href="#cb60-57" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">month_stock =</span> <span class="fu">month</span>(start_date))</span>
<span id="cb60-58"><a href="#cb60-58" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_stock =</span> <span class="fu">mday</span>(start_date))</span>
<span id="cb60-59"><a href="#cb60-59" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"November 4, 2020"</span>)</span>
<span id="cb60-60"><a href="#cb60-60" aria-hidden="true" tabindex="-1"></a><span class="fu">yday</span>(test)</span>
<span id="cb60-61"><a href="#cb60-61" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_in_year =</span> <span class="fu">yday</span>(start_date))</span>
<span id="cb60-62"><a href="#cb60-62" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">wday</span>(start_date))</span>
<span id="cb60-63"><a href="#cb60-63" aria-hidden="true" tabindex="-1"></a>stocks_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">wday</span>(start_date,</span>
<span id="cb60-64"><a href="#cb60-64" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./10-merging.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Merging with <code>dplyr</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./12-stringr.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Text Data with <code>tidytext</code> and <code>stringr</code></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Course Materials were written by Matt Higham for STAT/DATA 234 at St.&nbsp;Lawrence University.</div>   
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>